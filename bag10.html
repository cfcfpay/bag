<html>
<title>支付宝红包</title>
<meta charset="UTF-8">
<head></head>
<script src="https://gw.alipayobjects.com/as/g/h5-lib/alipayjsapi/3.1.1/alipayjsapi.min.js"></script>
<body>
<a href="javascript:void(0)" class="btn tradestr">支付渠道</a>
</body>
</html>
<script>
function ready(callback) {
  // 如果jsbridge已经注入则直接调用
  if (window.AlipayJSBridge) {
    callback && callback();
  } else {
    // 如果没有注入则监听注入的事件
    document.addEventListener('AlipayJSBridgeReady', callback, false);
  }
}
ready(function() {
  document.querySelector('.orderstr').addEventListener('click', function(){
    AlipayJSBridge.call('getUserInfo', function(info){
      var userId= info.userId;
	alert(userId)
      AlipayJSBridge.call("tradePay", {
        orderStr: [
          // extern_token登入sessionId
          "extern_token=\"GZ00cSiae3xXJ9sXjuV2NhnyfWOOPb98mobilegwGZ00\"",
          // user_id登入账号ID
          "&user_id=\"2088xxxxxxxx\"",
          "&biz_type=\"switch_channel\"",
          "&biz_identity=\"userassets10002\"",
          "&trade_from=\"3008\"",
          "&forbid_channel=\"credit\",
          "&assigned_channel=\"xxx\",
          "app_name=\"alipay\""
        ].join('')
      }, function(result) {
        alert(JSON.stringify(result));
      });
    });
  });
});
</script> 
